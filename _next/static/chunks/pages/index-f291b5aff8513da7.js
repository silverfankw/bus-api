(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{7276:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8059)}])},8059:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var l=a(4848),n=a(6540),s=a(6762),c=a(2543),o=a.n(c),r=a(8236),i=a(5394),d=a(2034),u=a(4806);let h=JSON.parse('{"button--search":"Search","button--copy":"Copy to clipboard","button--copied":"Copied!","button--export-json":"Export JSON","header--title":"Youtube Chapter Generator for Hong Kong Bus Routes","header--subtitle":"Create youtube chapter for your bus trip video in just few steps!","header--language-zh":"繁體中文","header--language-en":"English","label--enter-bus-route":"Enter bus route","label--result-display-language":"Result display language","label--chinese":"Chinese","label--english":"English","label--ch-en-combination":"Chinese + English","label--result-display-style":"Result display style","label--this-stop-only":"Single stop","label--this-and-next-stop":"This and next stop","hint--this-and-next-stop":"（KMB 38 as an example）\\n＊Single Stop：\\n\\tPing Tin\\n\\tPing Tin Street\\n\\tLam Tin (North)\\n\\t...\\n\\n＊This and next stop：\\n\\tPing Tin → Ping Tin Street\\n\\tPing Tin Street → Lam Tin (North)\\n\\t...","label--numeric-expression":"Display bus stop numeric order","label--show":"Show","label--hide":"Hide","label--search-result":"Search Result","label--bus-company":"Company","label--bus-route":"Route","label--departure":"Departure","label--destination":"Destination","label--stop-info":"Stops Info"}'),m=JSON.parse('{"button--search":"搜尋","button--copy":"複製到剪貼簿","button--copied":"已複製到剪貼簿!","button--export-json":"導出JSON","header--title":"Youtube巴士路線片段影片章節製作器","header--subtitle":"輕鬆拎路線分站做chapter！","header--language-zh":"繁體中文","header--language-en":"English","label--enter-bus-route":"輸入巴士路線","label--result-display-language":"站位結果語言","label--chinese":"中文","label--english":"英文","label--ch-en-combination":"中英混合","label--result-display-style":"站位結果顯示方式","label--this-stop-only":"只顯示單站","label--this-and-next-stop":"顯示本站與下站","hint--this-and-next-stop":"（以九巴路線296C為例）\\n＊單站顯示：\\n\\t尚德總站\\n\\t唐明街公園\\n\\t將軍澳隧道轉車站 (G2)\\n\\t創紀之城 (B8)\\n\\t...\\n\\n＊顯示本站與下站：\\n\\t尚德總站 → 唐明街公園\\n\\t唐明街公園 → 將軍澳隧道轉車站 (G2)\\n\\t將軍澳隧道轉車站 (G2) → 創紀之城 (B8)\\n\\t...","label--numeric-expression":"顯示分站數目排序","label--show":"顯示排序","label--hide":"隱藏排序","label--search-result":"搜尋結果","label--bus-company":"營辦公司","label--bus-route":"路線","label--departure":"起點站","label--destination":"終點站","label--stop-info":"站位資料"}'),b={capitalizeFirst:/\B[A-Z]|('S)/g},x=e=>e.replace(b.capitalizeFirst,e=>e.toLowerCase());var p=a(1686),g=a(3914),j=a(1727);let N=e=>{let{label:t,labelIcon:a,value:n,style:s,onClick:c}=e;return(0,l.jsxs)("button",{className:"".concat(s),onClick:c,value:n,children:[a&&(0,l.jsx)(g.g,{className:"mr-2 mt-1",icon:a}),(0,l.jsx)(p.A,{id:t})]})},y=(0,n.memo)(e=>{let{optionList:t,onChange:a,onBlur:n,value:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"text",list:"route",value:s,className:"   mt-1 mr-1 p-3 w-30 text-black rounded-lg border border-gray-300 sm:text-sm   focus:ring-blue-500 focus:border-blue-500    dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onKeyDown:e=>{((null==e?void 0:e.code)=="Enter"||(null==e?void 0:e.code)=="NumpadEnter")&&e.target.blur()},onChange:e=>a(e),onBlur:e=>n(e),autoComplete:"off"}),t&&(0,l.jsx)("datalist",{id:"route",children:t.map((e,t)=>(0,l.jsx)("option",{children:e},"option_".concat(t)))})]})}),f=e=>{let{labelIcon:t,labelId:a,option:n,style:s,modalHandler:c}=e;return(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsxs)("div",{className:"flex my-2 mt-4",children:[(0,l.jsx)(g.g,{className:"my-0.5",icon:t}),(0,l.jsx)("label",{className:"text-white sm:text-sm ml-2  ".concat(c&&"cursor-help"),onMouseOver:c,onMouseOut:c,children:(0,l.jsx)(p.A,{id:a})})]}),(0,l.jsx)("div",{className:"flex",children:null==n?void 0:n.map((e,t)=>(0,l.jsx)(N,{style:"border-0.5 border-solid border-neutral-500 rounded-md mx-0.5 ".concat(s," ").concat(e.checked&&"bg-green-700 font-bold"),label:null==e?void 0:e.labelId,value:null==e?void 0:e.value,onClick:null==e?void 0:e.onChange,modalHandler:!0},"button-".concat(t)))})]})},A=e=>{let t=(0,r.wA)(),{routeList:a,resultLanguage:s,resultDisplayStyle:c,numericDisplay:i}=e,[h,m]=(0,n.useState)(""),[b,x]=(0,n.useState)(!1),A=(0,n.useMemo)(()=>o().uniq(o().map(o().values(o().mapValues(a)),e=>e.route)),[a]),v=()=>t((0,d.ps)(a.filter(e=>e.route===h))),w=[{name:"language",labelId:"label--chinese",value:"zh",checked:"zh"===s,onChange:()=>t((0,u.gR)("zh"))},{name:"language",labelId:"label--english",value:"en",checked:"en"===s,onChange:()=>t((0,u.gR)("en"))},{name:"language",labelId:"label--ch-en-combination",value:"comb",checked:"comb"===s,onChange:()=>t((0,u.gR)("comb"))}],E=[{name:"display",labelId:"label--this-stop-only",value:"single",checked:"single"===c,onChange:()=>t((0,u.LN)("single"))},{name:"display",labelId:"label--this-and-next-stop",value:"multi",checked:"multi"===c,onChange:()=>t((0,u.LN)("multi"))}],k=[{name:"display",labelId:"label--show",value:!0,checked:!0===i,onChange:()=>t((0,u.ik)(!0))},{name:"display",labelId:"label--hide",value:!1,checked:!1===i,onChange:()=>t((0,u.ik)(!1))}];return(0,l.jsxs)("div",{className:"container rounded-xl m-3 w-1/5",children:[(0,l.jsxs)("div",{className:"mt-2 mx-3 text-white",children:[(0,l.jsx)(g.g,{icon:j.wY8}),(0,l.jsx)(g.g,{className:"ml-2",icon:j.MjD}),(0,l.jsx)("span",{className:"mx-2",children:(0,l.jsx)(p.A,{id:"label--enter-bus-route"})})]}),(0,l.jsx)("hr",{className:"mx-3 my-2"}),(0,l.jsxs)("div",{className:"ml-2",children:[(0,l.jsx)(y,{optionList:A,onChange:e=>m(e.target.value.trim().toUpperCase()),onBlur:v,value:h}),(0,l.jsx)(N,{style:"button ml-1 p-3 w-20",label:"button--search",onClick:v}),(0,l.jsx)(f,{labelIcon:j.mh,labelId:"label--result-display-language",style:"button-set py-1",option:w}),(0,l.jsx)(f,{labelIcon:j.ITF,labelId:"label--result-display-style",style:"button-set py-1",option:E,modalHandler:()=>x(!b)}),b&&(0,l.jsx)("div",{className:"relative w-auto my-3 mx-2 max-w-1xl z-10",children:(0,l.jsx)("div",{className:"border-1 rounded-lg shadow-lg flex w-full bg-neutral-500 ",children:(0,l.jsx)("div",{className:"relative p-3 flex-auto",children:(0,l.jsx)("pre",{className:"my-1 text-xs text-white ",children:(0,l.jsx)(p.A,{id:"hint--this-and-next-stop"})})})})}),(0,l.jsx)(f,{labelIcon:j.nkA,labelId:"label--numeric-expression",style:"button-set py-1",option:k})]})]})},v=e=>{let{placeholder:t,value:a,disabled:n,rows:s,style:c}=e;return(0,l.jsx)("div",{className:"mx-3",children:(0,l.jsx)("textarea",{className:"resize-none bg-gray-600/[0.5]	\n                placeholder:italic placeholder:text-slate-400 \n                rounded-lg my-2 pl-2 pt-1 w-full  col\n                text-sm ".concat(c),placeholder:t,value:a,disabled:n,rows:40})})},w=(0,n.memo)(e=>{let{stopIDs:t,stopList:a,selectedRoute:s,resultLanguage:c,resultDisplayStyle:o,numericDisplay:r}=e,[i,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),m=()=>{let e=new File([JSON.stringify({...s,stops:t.map(e=>({zh:a[e].name.zh,en:a[e].name.en.toUpperCase()})).concat({zh:"",en:""},{zh:"",en:""})})],"stop_detail",{type:"application/json"}),l=URL.createObjectURL(e);window.open(l,"_blank"),URL.revokeObjectURL(l)};return(0,n.useEffect)(()=>{d(t.reduce((e,l,n)=>{let s=t.length-1,i=a[l].name.zh,d=a[l].name.en,u=n!=s?a[t[n+1]].name.zh:"",h=n!=s?a[t[n+1]].name.en:"",m=r&&"multi"!==o?"".concat(n+1,". "):"",b="single"===o?"zh"==c?"".concat(i):"en"==c?"".concat(d):"comb"==c?"".concat(i," ").concat(d):"":"multi"===o?"zh"==c?"".concat(i," ").concat(n!=s?"→":""," ").concat(u):"en"==c?"".concat(d," ").concat(n!=s?"→":""," ").concat(h):"comb"==c?"".concat(i," ").concat(d," ").concat(n!=s?"→":""," ").concat(u," ").concat(h):"":"";return e.concat(m,b,n!=s?"\n":"")},""))},[t,c,o,r]),(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"flex ml-3 mt-2",children:[(0,l.jsx)(g.g,{className:"ml-1 my-1",icon:j.wY8}),(0,l.jsx)("p",{className:"mx-2",children:(0,l.jsx)(p.A,{id:"label--stop-info"})}),(0,l.jsx)(N,{labelIcon:u?j.e68:j.jPR,label:u?"button--copied":"button--copy",style:"button ".concat(u&&"bg-green-700"),onClick:e=>{navigator.clipboard.writeText(i),h(!0),setTimeout(()=>h(!1),2500)}}),(0,l.jsx)(N,{label:"button--export-json",style:"button bg-cyan-700 ml-2",onClick:()=>m()})]}),(0,l.jsx)(v,{placeholder:"No data",value:i,rows:t.length,disabled:!0})]})}),E={kmb:"九巴／龍運",ctb:"城巴",nwfb:"新巴",nlb:"嶼巴",gmb:"綠色專線小巴",lrtfeeder:"港鐵巴士"},k=["A30","A31","A32","A33","A33X","A34","A36","A37","A38","A41","A41P","A43","A43P","A47X"],C=["E31","E32","E32A","E33","E33P","E36","E36A","E36P","E36S","E37","E37C","E41","E42","E42C","E42P","E43"],R=["R8","S1","S64","S64C","S64P","S64X","S65"],S=["NA31","NA32","NA33","NA36","NA37","NA40","NA41","NA43","NA47"],z=["N8","N8P","N8X","N11","N20","N21","N21A","N23","N26","N29","N72","N90","969N","N307","N930","N796","N952","N962","N969"],O=["B7","B8"],I=["E21","E21A","E21B","E21C","E21D","E21X","E22","E22A","E22C","E22P","E22S","E22X","E23","E23A"],L=["E11","E11A","E11B","E11S"],P=["A10","A11","A17","A20","A21","A22","A23","A26","A29","A29P","NA10","NA11","NA12","NA20","NA21","NA29"],_=["N1","N35","N37","N38"],T=["347","388","389","629","629M"],D=["R33","R42","X33","X36","X40","X43"],X=["R108","R307","R603","R673","R678","R680","R930","R934","R936","R948","R960","R961","R962","R968","R969"],B=e=>{let{co:t,route:a}=e.details,n=a.match(/(^N)(\d|[A-Z]){1,4}/),s=S.indexOf(a)>-1,c=_.indexOf(a)>-1,o=z.indexOf(a)>-1,r=k.indexOf(a)>-1,i=a.match(/(^1)(\d){2}([A-Z])?/)||a.match(/(^3)(\d){2}([A-Z])?/)||a.match(/(^6)(\d){2}([A-Z])?/),d=X.indexOf(a)>-1,u=O.indexOf(a)>-1,h=T.indexOf(a)>-1,m=[...P,...I].indexOf(a)>-1,b=a.match(/(^9)(\d|[A-Z]){2,4}/)||L.indexOf(a)>-1,x=C.indexOf(a)>-1,p=R.indexOf(a)>-1,g=D.indexOf(a)>-1,j=!n&&!o&&!u&&!i&&!b&&!x&&!m&&!r&&!s&&!p&&!g&&!d;switch(t[0]){case"kmb":if(j)return(0,l.jsx)("span",{className:"px-2 py-0.5",children:a});case"ctb":if(j||h)return(0,l.jsx)("span",{className:"bg-[#002699] text-white px-2 py-0.5",children:a});case"nlb":if(j)return(0,l.jsx)("span",{className:"bg-[#000080] text-white px-2 py-0.5",children:a});if(c||s)return(0,l.jsx)("span",{className:"bg-black text-yellow-300 px-2 py-0.5",children:a});if(o)return(0,l.jsx)("span",{className:"bg-[#001142] text-amber-300 px-2 py-0.5",children:a});if((i||m||d||u)&&!h)return(0,l.jsx)("span",{className:"bg-red-700 px-2 py-0.5",children:a});else if(b)return(0,l.jsx)("span",{className:"bg-green-700 px-2 py-0.5",children:a});else if(r)return(0,l.jsx)("span",{className:"bg-[#000070] text-yellow-300 px-2 py-0.5",children:a});else if(n)return(0,l.jsx)("span",{className:"bg-black text-white px-2 py-0.5",children:a});else if(x||p||g)return(0,l.jsx)("span",{className:"bg-amber-600 px-2 py-0.5",children:a});default:return(0,l.jsx)("span",{className:"px-2 py-0.5",children:a})}},U=e=>{let{routeResult:t,language:a}=e,s=(0,r.wA)(),[c,o]=(0,n.useState)(null),i=async e=>{let t=Object.keys(e.stops)[0];s((0,d.ji)({route:e.route,dest:e.dest})),s((0,d.Tq)(e.stops[t]))};(0,n.useEffect)(()=>{o(null)},[t]);let u=(e,t)=>"zh"===a?"".concat(E[e]).concat(t?"":" 及 "):"".concat(e.toUpperCase()).concat(t?"":" & ");return(0,l.jsx)("div",{className:"container w-1/3",children:(0,l.jsxs)("div",{className:"mx-3 my-2",children:[(0,l.jsx)(g.g,{icon:j.hhY}),(0,l.jsx)("span",{className:"mx-3",children:(0,l.jsx)(p.A,{id:"label--search-result"})}),(0,l.jsxs)("table",{className:"table-auto my-2 w-full text-sm border-separate",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsxs)("th",{className:"normal-th",children:[(0,l.jsx)(g.g,{className:"mr-1",icon:j.URI}),(0,l.jsx)(p.A,{id:"label--bus-company"})]}),(0,l.jsxs)("th",{className:"normal-th ",children:[(0,l.jsx)(g.g,{className:"mr-1",icon:j.nD}),(0,l.jsx)(p.A,{id:"label--bus-route"})]}),(0,l.jsxs)("th",{className:"normal-th",children:[(0,l.jsx)(g.g,{className:"mr-1",icon:j.e74}),(0,l.jsx)(p.A,{id:"label--departure"})]}),(0,l.jsxs)("th",{className:"normal-th",children:[(0,l.jsx)(g.g,{className:"mr-1",icon:j.o9H}),(0,l.jsx)(p.A,{id:"label--destination"})]})]})}),(0,l.jsx)("tbody",{children:t.length?t.map((e,t)=>(0,l.jsxs)("tr",{className:"hover-tr ".concat(c==t?"selected-tr":""),onClick:a=>{i(e),o(t)},children:[(0,l.jsx)("td",{children:e.co.map((t,a)=>u(t,a==e.co.length-1))},"route-result-".concat(t,"-cmp")),(0,l.jsx)("td",{className:"route-num ".concat("1"!==e.serviceType&&"kmb"==e.co?"after:content-['特班'] after:ml-0.5 after:text-red-500 after:font-bold":""),children:(0,l.jsx)(B,{details:e})},"route-result-".concat(t,"-route")),(0,l.jsx)("td",{children:e.orig[a]},"route-result-".concat(t,"-name_tc")),(0,l.jsx)("td",{children:e.dest[a]},"route-result-".concat(t,"-dest_tc"))]},"route-result-".concat(t))):(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{children:[" ","-"," "]}),(0,l.jsxs)("td",{children:[" ","-"," "]}),(0,l.jsxs)("td",{children:[" ","-"," "]}),(0,l.jsxs)("td",{children:[" ","-"," "]})]})})]})]})})},F=e=>{let{language:t}=e,a=(0,r.wA)(),n=[{name:"site-language",labelId:"header--language-zh",value:"zh",checked:"zh"===t,onChange:()=>a((0,i.xC)("zh"))},{name:"site-language",labelId:"header--language-en",value:"en",checked:"en"===t,onChange:()=>a((0,i.xC)("en"))}];return(0,l.jsx)("div",{className:"flex h-20 bg-zinc-600 bg-gradient-to-r from-neutral-600 to-slate-900",children:(0,l.jsxs)("div",{className:"flex mx-3 mt-3 w-screen bg-gradient-to-r from-neutral-600 to-slate-900",children:[(0,l.jsx)("div",{className:"flex-none h-5 w-1/6"}),(0,l.jsxs)("div",{className:"flex-auto h-5 w-1/6",children:[(0,l.jsx)("div",{className:"flex mt-1 justify-center text-white sm:text-2xl font-bold",children:(0,l.jsx)(p.A,{id:"header--title"})}),(0,l.jsx)("div",{className:"flex mt-1 justify-center text-white sm:text-sm font-medium",children:(0,l.jsx)(p.A,{id:"header--subtitle"})})]}),(0,l.jsx)("div",{className:"flex h-6 w-1/6 justify-end",children:(0,l.jsx)(f,{style:"button-set sm:text-xs mx-1",option:n})})]})})},M="https://data.etabus.gov.hk/",Z="https://rt.data.gov.hk/",H="v1.1";"".concat(M).concat("v1","/transport/kmb/route/"),"".concat(M).concat("v1","/transport/kmb/stop/"),"".concat(M).concat("v1","/transport/kmb/route-stop/"),"".concat(M).concat("v1","/transport/kmb/eta/"),"".concat(M).concat("v1","/transport/kmb/stop-eta/"),"".concat(M).concat("v1","/transport/kmb/route-eta/"),"".concat(Z).concat(H,"/transport/citybus-nwfb/route/ctb/"),"".concat(Z).concat(H,"/transport/citybus-nwfb/route/nwfb/"),"".concat(Z).concat(H,"/transport/citybus-nwfb/route-stop/"),"".concat(Z).concat(H,"/transport/citybus-nwfb/stop/");let J=async()=>await fetch("https://data.hkbus.app/routeFareList.min.json").then(e=>e.json());function Y(){let e=(0,r.d4)(i.zi),t=(0,r.d4)(d.Ue),a=(0,r.d4)(d.fC),c=(0,r.d4)(d.Pt),b=(0,r.d4)(d.L9),p=(0,r.d4)(d.zh),g=(0,r.d4)(u.I8),j=(0,r.d4)(u.wI),N=(0,r.d4)(u.nm),y=(0,r.wA)(),f=e=>{let t=o().mapValues(e.stopList,e=>({...e,name:{zh:e.name.zh.includes(",")?e.name.zh.split(",")[0]:e.name.zh,en:e.name.en.includes(",")?x(e.name.en.split(",")[0]):x(e.name.en)}}));y((0,d.nc)(t))},v=e=>y((0,d.Qf)(o().values(e.routeList))),E=async()=>{await J().then(e=>{f(e),v(e)}).catch(e=>console.log(e))};return(0,n.useEffect)(()=>{E()},[]),(0,l.jsxs)(s.A,{locale:e,messages:{zh:m,en:h}[e],children:[(0,l.jsx)(F,{language:e}),(0,l.jsxs)("div",{className:"flex bg-zinc-600 bg-gradient-to-r from-neutral-600 to-slate-900",children:[(0,l.jsx)(A,{routeList:t,resultLanguage:j,resultDisplayStyle:N,numericDisplay:g}),(0,l.jsx)(U,{routeResult:a,language:e}),(0,l.jsx)(w,{resultLanguage:j,resultDisplayStyle:N,stopList:c,stopIDs:b,selectedRoute:p,numericDisplay:g})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[570,326,788,636,593,792],()=>t(7276)),_N_E=e.O()}]);